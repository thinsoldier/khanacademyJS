<!DOCTYPE html>
<html>
<head>
	<meta charset="utf8">
	<title>Khan JavaScript</title>
	<link rel="stylesheet" href="style.css"/>
</head>
<body>

<p>
<a id="origLink" target="_blank" href="">foobar</a>
</p>
<br>

<ul id="list">
</ul>

<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/processing.js/1.4.8/processing.min.js"></script> -->
<script src="processing.min.js"></script>
<script src="khanProcessing.js"></script>
<script>
var files = [
	'animal-attack.js',
	'bookshelf.js',
	'burger.js',
	'cartesian-coordinates.js',
	'compass.js',
	'donuts-create-graphics.js',
	'get-web-image.js',
	'house-refactor.js',
	'make-it-rain.js',
	'p3d-cube.js',
	'p3d-wave.js',
	'pikachu.js',
	'pizza.js',
	'radial-gradient.js',
	'sea-weed.js',
	'shooting-star.js',
	'watermelon.js',
	'watermelon-experiment.js',
];

var build = function( fileIndex )
{
	var canvas = document.createElement('canvas');
	canvas.id="canvas";
	document.body.insertBefore( canvas, document.body.firstChild );
	console.log(document);
	KP = new khanProcessing();
	
	var script = document.createElement('script');
	script.onload = function(){
		var link = document.getElementById('origLink');
		console.log('link');
		link.innerHTML = originalUrl;
		link.href = originalUrl;
	}
	script.src = files[ fileIndex ];
	document.body.appendChild(script);
}

var urlInfo = window.location.href.split('?file=');
if( urlInfo.length === 2)
{ build( urlInfo[1] ); }
else { build( 0 ); }
</script>


<script>
var list = document.getElementById('list');
for( x in files ){
	var li = document.createElement('li');
	var a = document.createElement('a');
	a.href = 'index.html?file=' + x;
	a.innerHTML = files[x];
	li.appendChild( a );
	list.appendChild( li );
	console.log(a);
}
</script>

</body>
</html>